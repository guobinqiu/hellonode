- hosts: nodejs
  gather_facts: no
  tasks:
    - name: Copy hellonode to remote 
      copy:
        src: "{{ artifact }}"
        dest: "hellonode.tgz"
        mode: '0755'
    - name: Unarchive artifact without top-level directory
      unarchive:
        src: /home/guobin/hellonode.tgz
        dest: /home/guobin
        extra_opts: --strip-components=1
        remote_src: no
    - name: Restart PM2
      command: pm2 restart hellonopde/app.js -i max
